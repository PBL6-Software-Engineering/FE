<!-- Modal -->
<div
  class="modal fade"
  id="detailModal"
  tabindex="-1"
  aria-labelledby="detailModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5 fw-700" id="detailModalLabel"></h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div id="service-container">
          <h3 class="fw-700 mb-3">Về dịch vụ</h3>
          <div class="" id="aboutService"></div>
          <h3 class="fw-700 mb-3">Quy trình</h3>
          <div class="" id="prepareProcess"></div>
          <h3 class="fw-700 mb-3">Chi tiết dịch vụ</h3>
          <div class="" id="serviceDetails"></div>
        </div>
        <div id="detail"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>

<h1 class="fs-28 fw-700 mb-20">Lịch sử đặt chỗ</h1>
<ul class="d-flex w-100 border-bottom">
  <li
    class="nav-tab"
    (click)="chooseTab('waitBooking')"
    [class.active]="tab === 'waitBooking'"
  >
    Lịch hẹn sắp đến ({{ waitNumber }})
  </li>
  <li
    class="nav-tab"
    (click)="chooseTab('doneBooking')"
    [class.active]="tab === 'doneBooking'"
  >
    Hoàn thành ({{ doneNumber }})
  </li>
  <li
    class="nav-tab"
    (click)="chooseTab('historyBooking')"
    [class.active]="tab === 'historyBooking'"
  >
    Lịch sử đặt chỗ
  </li>
</ul>

<div *ngIf="items.length > 0">
  <div class="event-schedule-area-two bg-color pad100">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 px-0">
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active show" id="home" role="tabpanel">
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <!-- class="text-center" -->
                      <th
                        style="
                          background-color: rgb(45, 135, 243);
                          color: white;
                        "
                        scope="col"
                      >
                        Thời gian
                      </th>
                      <!-- <th style="background-color: rgb(45, 135, 243); color: white;" scope="col">Speakers</th> -->
                      <th
                        style="
                          background-color: rgb(45, 135, 243);
                          color: white;
                        "
                        scope="col"
                      >
                        Thông tin
                      </th>
                      <th
                        style="
                          background-color: rgb(45, 135, 243);
                          color: white;
                        "
                        scope="col"
                      >
                        Địa điểm
                      </th>
                      <th
                        style="
                          background-color: rgb(45, 135, 243);
                          color: white;
                        "
                        scope="col"
                      ></th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- <div class="d-flex py-20 border-bottom" > -->
                    <tr
                      class="inner-box"
                      *ngFor="let item of items; let i = index"
                    >
                      <th scope="row">
                        <div class="event-date">
                          <span>{{ item.day }}</span>
                          <p>{{ item.month }}</p>
                        </div>
                      </th>
                      <!-- <td>
                        <div class="event-img">
                          <img src="https://bootdey.com/img/Content/avatar/avatar1.png" alt="" />
                        </div>
                      </td> -->
                      <td>
                        <div class="event-wrap">
                          <h3>
                            <ng-container
                              *ngIf="item.service_name; else showDefault"
                            >
                              <a class="color-primary">{{ item.service_name }}</a>
                            </ng-container>
                            <ng-template #showDefault>
                              <a class="color-primary">Lịch tư vấn</a>
                            </ng-template>
                          </h3>
                          <div class="meta">
                            <div class="organizers">
                              <ng-container
                                *ngIf="item.doctor_name; else showNone"
                              >
                                <a>{{ item.doctor_name }}</a>
                              </ng-container>
                              <ng-template #showNone>
                                <a>Đang cập nhật tên bác sĩ</a>
                              </ng-template>
                            </div>
                            <div class="categories">
                              <a>{{ item.department_name }}</a>
                            </div>
                            <div class="time">
                              <span
                                >{{ item.work_schedule_time.interval[0] }} -
                                {{ item.work_schedule_time.interval[1] }}</span
                              >
                            </div>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div class="r-no">
                          <span>{{ item.hospital_address }}</span>
                        </div>
                      </td>
                      <!-- Button trigger modal -->
                      <td>
                        <div
                          id="{{ item.id }}"
                          class="btn primary-btn"
                          data-bs-toggle="modal"
                          data-bs-target="#detailModal"
                          (click)="showDetail($event)"
                        >
                          Xem chi tiết
                        </div>
                      </td>
                    </tr>
                    <!-- </div> -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isLoading">
  <div class="wrapper-spinner" *ngIf="isLoading">
    <ngx-spinner
      bdColor="rgba(0,0,0,0)"
      size="default"
      color="#11B3CF"
      type="ball-pulse-sync"
      [fullScreen]="false"
    >
      <p class="color-primary">Đang tải dữ liệu</p>
    </ngx-spinner>
  </div>
</div>

<div class="text-center" *ngIf="items.length === 0 && !isLoading">
  <img src="assets/media/icon/calendarEmpty.svg" alt="" />
  <div *ngIf="tab === 'waitBooking'">
    <h2 class="fw-700 fs-18 mb-20">Không có lịch hẹn sắp đến</h2>
    <div class="color-sub fs-14">
      Đừng lo lắng. Đặt lịch hẹn với một chuyên gia gần đó
    </div>
  </div>

  <div *ngIf="tab === 'doneBooking'">
    <h2 class="fw-700 fs-18 mb-20">Không có lịch hẹn đã hoàn thành</h2>
    <div class="color-sub fs-14">
      Lịch hẹn đã hoàn thành của bạn sẽ xuất hiện ở đây
    </div>
  </div>
  <div *ngIf="tab === 'historyBooking'">
    <h2 class="fw-700 fs-18 mb-20">Không có lịch hẹn đã hoàn thành</h2>
    <div class="color-sub fs-14">
      Lịch hẹn đã hoàn thành của bạn sẽ xuất hiện ở đây
    </div>
  </div>
</div>
