<!-- LIST CONVERSATION -->
<div class="popup conversation-wrapper">
  <ul class="list-group">
    <li
      class="list-group-item list-group-item-action"
      *ngFor="let conversation of conversations"
      (click)="setConversation(conversation)"
    >
      <div class="d-flex">
        <div>
          <img
            [src]="
              user?.role === 'user'
                ? conversation?.admin?.avatar
                : conversation?.user?.avatar
            "
            alt=""
            class="wh-40 avatar"
            onerror="this.src='assets/media/image/avatar_user_default.png'"
          />
        </div>
        <div class="ml-12 w-100">
          <h5 class="fs-12 fw-bold">
            <span *ngIf="user?.role === 'user'">{{
              conversation?.admin?.name || "Người tư vấn"
            }}</span>
            <span *ngIf="user?.role !== 'user'">{{
              conversation?.user?.name || "Khách"
            }}</span>
          </h5>
          <p class="preview-content-1 last-message">
            {{ conversation.lastMessage }}
          </p>
          <div class="flex-end preview-content-1 last-message mt-6">
            {{ conversation?.createdAt | timeAgo }}
          </div>
        </div>
      </div>
    </li>
  </ul>

  <div class="wrapper-spinner" *ngIf="isLoadConversation">
    <ngx-spinner
      bdColor="rgba(0,0,0,0)"
      size="default"
      color="#2095c4"
      type="ball-pulse-sync"
      [fullScreen]="false"
    >
      <p class="color-primary">Đang tải dữ liệu</p>
    </ngx-spinner>
  </div>
</div>
