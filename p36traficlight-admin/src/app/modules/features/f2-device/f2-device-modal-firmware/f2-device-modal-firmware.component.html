<div class="modal-content" style="background-color: #F6F6F7">
  <div class="modal-header position-relative border-0">
    <p class="fs-1 modal-title w-100 text-center m-0 fw-bold" id="upgradeFirmwareLabel">
      <span class="cl-text-title">Nâng cấp firmware</span>
      <br>
      <span class="cl-text-normal fs-14px fw-normal">
            Chọn firmware để thực hiện việc nâng cấp
          </span>
    </p>
    <button type="button" class="close close-modal"
            data-dismiss="modal" aria-label="Close" (click)="resetIdSelected()"
    >
      <span aria-hidden="true" style="font-size: 30px">&times;</span>
    </button>
  </div>
  <div class="modal-body p-0 border-0 bg-white modal-body-mar-x mt-5 rounded">
    <div class="wrapper-firmware">
      <div class="table-responsive" style="min-height: 340px">
        <form
          data-kt-search-element="form"
          class="w-100 position-relative col-lg-5 col-md-7 col-12 pr-30px m-3 mt-5"
          autocomplete="off"
        >
          <!--begin::Icon-->
          <span
            [inlineSVG]="'./assets/media/icons/duotune/general/gen021.svg'"
            style="padding-left: 16px"
            class="svg-icon svg-icon-3 svg-icon-sm-1 svg-icon-gray-500 position-absolute top-50 translate-middle-y ms-0"
          ></span>
          <!--end::Icon-->

          <!--begin::Input-->
          <input
            type="text"
            class="form-control form-control-sm form-control-solid px-15 fs-14px"
            name="search"
            value=""
            placeholder="Search name"
            data-kt-search-element="input"
            [ngModel]="keyword"
            (ngModelChange)="search($event)"
          />
          <!--end::Input-->

          <!--begin::Spinner-->
          <span
            style="padding-right: 46px"
            class="position-absolute top-50 end-0 translate-middle-y lh-0 me-1"
            data-kt-search-element="spinner"
            [ngClass]="searching ? '' : 'd-none'"
          >
            <span class="spinner-border h-15px w-15px align-middle text-gray-400"></span>
          </span>
          <!--end::Spinner-->

          <!--begin::Reset-->
          <span
            style="padding-right: 46px !important;"
            class="btn btn-flush btn-active-color-primary position-absolute top-50 end-0 translate-middle-y lh-0"
            data-kt-search-element="clear"
            [ngClass]="searching || keyword.length === 0 ? 'd-none' : ''"
            (click)="clearSearch()"
          >
    <span
      [inlineSVG]="'./assets/media/icons/duotune/arrows/arr061.svg'"
      class="svg-icon svg-icon-2 svg-icon-lg-1 me-0"
    ></span>
  </span>
          <!--end::Reset-->
        </form>
        <!-- begin::Table -->
        <table class="table table-row-bordered table-row-gray-100 align-middle gs-0 gy-3">
          <!-- begin::Table head -->
          <thead class="fs-14px">
          <tr class="cl-text-normal">
            <th class="min-w-150px pl-3">Tên Model</th>
            <th class="min-w-100px">Phiên bản</th>
            <th class="min-w-125px pr-3 text-center">Ngày phát hành</th>
          </tr>
          </thead>
          <!-- end::Table head -->
          <!-- begin::Table body -->
          <tbody class="upgrade-firmware-wrapper">
          <tr class="cursor-pointer" *ngFor="let fw of dataSources"
              (click)="updateIdSelect(fw._id)"
              [ngClass]="idSelected === fw._id ? 'bg-orange-2' : ''"
          >
            <!-- begin:name model -->
            <td class="pl-3">
              <p class="fw-bold  d-block mb-1 fs-6">
                {{ fw.nameModel }}
              </p>
            </td>
            <!-- end:name model -->

            <!-- begin:version -->
            <td>
              <p class="fw-bold  d-block mb-1 fs-6">
                {{ fw.version }}
              </p>
            </td>
            <!-- end:version -->

            <!-- begin:date release -->
            <td class="pr-3">
              <p class="fw-bold d-block mb-1 fs-6 text-center">
                {{ fw.dateRelease | date: 'dd-MM-yyyy' }}
              </p>
            </td>
            <!-- end:date release -->
          </tr>
          </tbody>
          <!-- end::Table body -->
        </table>
        <!-- end::Table -->
      </div>
      <div
        class="d-flex flex-stack flex-wrap fw-bold"
        style="float: right"
        *ngIf="dataSources"
      >
        <div class="text-gray-700">Items per page:</div>

        <div>
          <select
            [(ngModel)]="pageSize"
            (change)="onChangeSize()"
            class="form-select form-select-solid form-select-md select-paginate"
            name="currency"
          >
            <option value="5">5</option>
            <option value="20">20</option>
            <option value="50">50</option>
            <option value="80">80</option>
          </select>
        </div>

        <div class="text-gray-700 mr-lr-20">
          {{ (pageIndex - 1) * pageSize + 1 }} -
          {{ (pageIndex - 1) * pageSize + dataSources.length }}
          of {{ pageLength }}
        </div>

        <ul class="pagination">
          <!-- begin page -->
          <li class="page-item previous" (click)="onBeginClick()" disabled="true">
            <a class="page-link cursor-pointer">
        <span
          [inlineSVG]="'./assets/media/icons/duotune/arrows/arr079.svg'"
          class="svg-icon svg-icon-3"
        ></span>
            </a>
          </li>

          <!-- previous page -->
          <li class="page-item previous" (click)="onPreviousClick()">
            <a class="page-link cursor-pointer">
              <i class="previous"></i>
            </a>
          </li>

          <!-- next page -->
          <li class="page-item next" (click)="onNextClick()">
            <a class="page-link cursor-pointer">
              <i class="next"></i>
            </a>
          </li>

          <!-- end page -->
          <li class="page-item next" (click)="onEndClick()">
            <a class="page-link cursor-pointer">
        <span
          [inlineSVG]="'./assets/media/icons/duotune/arrows/arr080.svg'"
          class="svg-icon svg-icon-3"
        ></span>
            </a>
          </li>
        </ul>
      </div>
    </div>

  </div>
  <div class="modal-footer border-0 justify-content-center my-5 mt-0">
    <button type="button" class="btn btn-cancel-gray min-w-80px" data-dismiss="modal" (click)="resetIdSelected()">Huỷ
    </button>
    <button type="button" class="btn bg-blue-10 ml-3 min-w-80px" (click)="processUpgrade()">Gửi</button>
  </div>

  <!-- The Modal -->
  <div id="myModal" class="modal-custom">
    <!-- Modal content -->
    <div class="modal-content-custom">
      <span class="close-custom" (click)="closedModalProcessUpgrade()">&times;</span>
      <p class="fw-bold text-black fs-1 text-center" *ngIf="progress < 100">Quá trình nâng cấp firmware</p>
      <p class="fw-bold text-black fs-1 text-center" *ngIf="progress == 100">Nâng cấp firmware thành công</p>

      <div *ngIf="progress < 100">
        <div class="bg-white px-5 pt-2 pb-7 my-30px br-5 wrapper-process position-relative">
          <progress-bar [progress]="progress.toString()" [color]="'#FFA000'" id="progress-bar">
          </progress-bar>
          <span class="text-progress position-absolute bottom-0">{{progress}}% completed</span>
        </div>
        <div class="cl-text-normal text-center fs-14px">
          Quá trình nâng cấp firmware đang được diễn ra.
          <br>
          Chọn “Hủy” để dừng và kết thúc quá trình.
        </div>
        <div class="text-center my-30px">
          <button class="btn bg-blue-10 min-w-75px" (click)="closedModalProcessUpgrade()">Huỷ</button>
        </div>
      </div>

      <div class="text-center zoom-50 my-2" [ngClass]="progress === 100 ? 'd-block' : 'd-none'">
        <span
          [inlineSVG]="'./assets/media/icons/duotune/general/gen133.svg'"
          class="svg-icon svg-icon-2"
        ></span>
      </div>
    </div>
  </div>
</div>

